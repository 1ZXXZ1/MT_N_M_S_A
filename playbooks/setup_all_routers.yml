---
- name: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤—Å–µ–π —Å–µ—Ç–∏ MikroTik
  hosts: localhost
  gather_facts: yes
  
  vars:
    setup_order: ["router_rt1", "router_rt2", "router_rt3"]
  
  tasks:
    - name: –í–∫–ª—é—á–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
      include_vars:
        file: mikrotik_vars.yml
        name: mikrotik_vars

    - name: –ü–æ–∫–∞–∑–∞—Ç—å –ø–æ—Ä—è–¥–æ–∫ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
      debug:
        msg: "üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–æ—É—Ç–µ—Ä–æ–≤ –≤ –ø–æ—Ä—è–¥–∫–µ: {{ setup_order }}"

    - name: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–æ—É—Ç–µ—Ä–æ–≤ –ø–æ –ø–æ—Ä—è–¥–∫—É
      include_tasks: process_router.yml
      loop: "{{ setup_order }}"
      loop_control:
        loop_var: router_name
        label: "{{ router_name }}"
